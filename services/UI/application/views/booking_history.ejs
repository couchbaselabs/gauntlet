<%- include('partials/header', {page: 'Booking History'}); %>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script type="text/javascript" src="/jquery/jquery.min.js"></script>
<script type="text/javascript" src="/bootstrap_js/bootstrap.bundle.min.js"></script>

<script>
</script>

<% if ( typeof detail !== 'undefined' && detail == "single" ) { %>
  <p>
  	<h3> Booking details </h3>
  </p>
  <table class="table table-bordered">
    <tr>
			<td> Booking Id </td>
			<td> <%=data['id']%> </td>
		</tr>
    <tr>
			<td> Flight Id </td>
			<td> <%=data['flightId']%> </td>
		</tr>
    <tr>
			<td> # Seats </td>
			<td> <%=data['flightSeats']%> </td>
		</tr>
    <tr>
			<td> Class </td>
			<td> <%=data['bookingClass']%> </td>
		</tr>
    <tr>
			<td> Wallet details </td>
			<td> <%=data['bankAccount']%> </td>
		</tr>
    <tr>
			<td> Cost </td>
			<td> <%=data['ticket_cost']%> </td>
		</tr>
    <tr>
			<td> Status </td>
			<td> <%=data['status']%> </td>
		</tr>
    <% if ("Booking failure reason" in data) { %>
		<tr>
			<td> Failure reason </td>
			<td> <%=data['Booking failure reason']%> </td>
		</tr>
		<% } %>
  </table>
  <center>
    <a class="btn btn-primary" href="/booking_history" role="button">Back</a>
    <a class="btn btn-primary" href="/" role="button">Home</a>
    <a class="btn btn-primary" href="/cancel_booking/<%=data['id']%>" role="button">Cancel Ticket</a>
  </center>
<% } else { %>
  <p>
    <span class="label label-info">Total bookings - <%=data.length%></span>
  </p>
  <% if(data.length > 0) { %>
    <table id=booking_hist_tbl class="table table-striped table-bordered table-hover table-condensed">
      <thead> <tr>
        <th>Booking Ids</th>
      </tr> </thead>
      <% for(var i=0; i < data.length; i++) { %>
        <tr>
          <td> <a href='/booking_history/<%=data[i]%>'> <%=data[i]%> </a> </td>
        </tr>
      <% } %>
    </table>
  <% } %>
<% } %>

<%- include('partials/footer'); %>
